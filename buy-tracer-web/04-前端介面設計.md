# è‚¡ç¥¨è²·é»è¿½è¹¤ Web ç³»çµ± - å‰ç«¯ä»‹é¢è¨­è¨ˆ

## 1. è¨­è¨ˆåŸå‰‡

### 1.1 æ ¸å¿ƒç†å¿µ
- **ç°¡æ½”ç›´è§€**: é™ä½å­¸ç¿’æ›²ç·šï¼Œä¸€ç›®ç­ç„¶
- **è³‡è¨Šå„ªå…ˆ**: æŠ€è¡“åˆ†æçµæœæ¸…æ™°å‘ˆç¾
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**: æ”¯æ´æ¡Œé¢ã€å¹³æ¿ã€æ‰‹æ©Ÿ
- **äº’å‹•æ€§**: å³æ™‚åé¥‹èˆ‡å‹•æ…‹åœ–è¡¨

### 1.2 æŠ€è¡“æ£§
- **æ¨¡æ¿å¼•æ“**: Jinja2
- **CSS æ¡†æ¶**: Bootstrap 5.3
- **åœ–è¡¨åº«**: Plotly.js
- **HTTP å®¢æˆ¶ç«¯**: Axios
- **åœ–ç¤º**: Bootstrap Icons

### 1.3 è‰²å½©è¨­è¨ˆ
```css
:root {
  --primary-color: #2563eb;      /* è—è‰² - ä¸»è‰²èª¿ */
  --success-color: #10b981;      /* ç¶ è‰² - æˆåŠŸ/è²·é» */
  --danger-color: #ef4444;       /* ç´…è‰² - è­¦å‘Š */
  --warning-color: #f59e0b;      /* æ©˜è‰² - æç¤º */
  --dark-bg: #1f2937;            /* æ·±è‰²èƒŒæ™¯ */
  --light-bg: #f9fafb;           /* æ·ºè‰²èƒŒæ™¯ */
  --text-primary: #111827;       /* ä¸»è¦æ–‡å­— */
  --text-secondary: #6b7280;     /* æ¬¡è¦æ–‡å­— */
  --border-color: #e5e7eb;       /* é‚Šæ¡†é¡è‰² */

  /* å°è‚¡ç‰¹è‰²é…è‰² */
  --stock-up: #dc2626;           /* ç´…æ¼² */
  --stock-down: #16a34a;         /* ç¶ è·Œ */
}
```

## 2. é é¢çµæ§‹

### 2.1 æ•´é«”ä½ˆå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å°èˆªæ¬„ (Navbar)                     â”‚
â”‚  [Logo] è‚¡ç¥¨è²·é»è¿½è¹¤  [é¦–é ] [æ­·å²è¨˜éŒ„] [èªªæ˜]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                          â”‚
â”‚                    ä¸»è¦å…§å®¹å€                             â”‚
â”‚                   (Main Content)                         â”‚
â”‚                                                          â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                      é å°¾ (Footer)                       â”‚
â”‚  Â© 2024 Buy Tracer | æ•¸æ“šä¾†æº: twstock | åƒ…ä¾›å­¸ç¿’        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 åŸºç¤æ¨¡æ¿ (`templates/base.html`)

```html
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}è‚¡ç¥¨è²·é»è¿½è¹¤ç³»çµ±{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    {% block extra_head %}{% endblock %}
</head>
<body>
    <!-- å°èˆªæ¬„ -->
    {% include 'components/navbar.html' %}

    <!-- ä¸»è¦å…§å®¹ -->
    <main class="container my-4">
        {% block content %}{% endblock %}
    </main>

    <!-- é å°¾ -->
    <footer class="bg-dark text-white text-center py-3 mt-5">
        <p class="mb-0">Â© 2024 Buy Tracer | æ•¸æ“šä¾†æº: twstock | åƒ…ä¾›æŠ€è¡“å­¸ç¿’ï¼Œä¸æ§‹æˆæŠ•è³‡å»ºè­°</p>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    {% block extra_scripts %}{% endblock %}
</body>
</html>
```

## 3. é¦–é è¨­è¨ˆ (`templates/index.html`)

### 3.1 ç‰ˆé¢é…ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     é é¦–æ¨™é¡Œå€                           â”‚
â”‚  è‚¡ç¥¨è²·é»è¿½è¹¤ç³»çµ±                                        â”‚
â”‚  é‹ç”¨æŠ€è¡“åˆ†æï¼Œæ™ºèƒ½è¿½è¹¤è²·é»è¨Šè™Ÿ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                          â”‚
â”‚                  è‚¡ç¥¨ä»£è™Ÿè¼¸å…¥å€                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ è¼¸å…¥è‚¡ç¥¨ä»£è™Ÿ...     â”‚  â”‚ åˆ†æ â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚  ä¾‹å¦‚: 2330 (å°ç©é›»), 3363 (ä¸Šè©®)                       â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                  åˆ†ææ–¹æ³•èªªæ˜å€                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“Š æŠ€è¡“æŒ‡æ¨™    â”‚ â”‚ ğŸ¯ è²·é»ç­–ç•¥   â”‚ â”‚ ğŸ“ˆ åœ–è¡¨åˆ†æ  â”‚  â”‚
â”‚  â”‚ MA5/20/60     â”‚ â”‚ è¶¨å‹¢ç¢ºç«‹      â”‚ â”‚ Kç·šåœ–       â”‚  â”‚
â”‚  â”‚ MACD          â”‚ â”‚ æ‹‰å›æ”¯æ’      â”‚ â”‚ MACDåœ–      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                  è¿‘æœŸè¿½è¹¤è¨˜éŒ„                            â”‚
â”‚  æœ€è¿‘æŸ¥è©¢çš„è‚¡ç¥¨: [2330] [3363] [2454]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 HTML å¯¦ä½œ

```html
{% extends 'base.html' %}

{% block title %}é¦–é  - è‚¡ç¥¨è²·é»è¿½è¹¤ç³»çµ±{% endblock %}

{% block content %}
<!-- é é¦–æ¨™é¡Œå€ -->
<div class="text-center mb-5">
    <h1 class="display-4 fw-bold mb-3">
        <i class="bi bi-graph-up-arrow text-primary"></i>
        è‚¡ç¥¨è²·é»è¿½è¹¤ç³»çµ±
    </h1>
    <p class="lead text-secondary">
        é‹ç”¨æŠ€è¡“åˆ†æï¼Œæ™ºèƒ½è¿½è¹¤å°è‚¡è²·é»è¨Šè™Ÿ
    </p>
</div>

<!-- è‚¡ç¥¨ä»£è™Ÿè¼¸å…¥å€ -->
<div class="row justify-content-center mb-5">
    <div class="col-md-6">
        <div class="card shadow-sm">
            <div class="card-body p-4">
                <form id="analyzeForm">
                    <div class="input-group input-group-lg">
                        <input
                            type="text"
                            class="form-control"
                            id="tickerInput"
                            placeholder="è¼¸å…¥è‚¡ç¥¨ä»£è™Ÿ..."
                            pattern="[0-9]{4,6}"
                            required
                            autofocus
                        >
                        <button class="btn btn-primary" type="submit">
                            <i class="bi bi-search"></i> åˆ†æ
                        </button>
                    </div>
                    <div class="form-text mt-2">
                        ä¾‹å¦‚: 2330 (å°ç©é›»)ã€3363 (ä¸Šè©®)ã€2454 (è¯ç™¼ç§‘)
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- åˆ†ææ–¹æ³•èªªæ˜å€ -->
<div class="row mb-5">
    <div class="col-md-4 mb-3">
        <div class="card h-100 border-primary">
            <div class="card-body text-center">
                <i class="bi bi-graph-up display-4 text-primary mb-3"></i>
                <h5 class="card-title">æŠ€è¡“æŒ‡æ¨™</h5>
                <p class="card-text text-secondary">
                    è¨ˆç®— MA5/MA20/MA60 ç§»å‹•å¹³å‡ç·šèˆ‡ MACD æŒ‡æ¨™ï¼Œ
                    å…¨é¢åˆ†æè‚¡åƒ¹è¶¨å‹¢èˆ‡å‹•èƒ½ã€‚
                </p>
            </div>
        </div>
    </div>

    <div class="col-md-4 mb-3">
        <div class="card h-100 border-success">
            <div class="card-body text-center">
                <i class="bi bi-bullseye display-4 text-success mb-3"></i>
                <h5 class="card-title">é›™ç­–ç•¥è²·é»</h5>
                <ul class="list-unstyled text-secondary">
                    <li>ğŸš€ è¶¨å‹¢ç¢ºç«‹è²·é»</li>
                    <li class="mt-2">âœ¨ æ‹‰å›æ”¯æ’è²·é»</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="col-md-4 mb-3">
        <div class="card h-100 border-warning">
            <div class="card-body text-center">
                <i class="bi bi-bar-chart-line display-4 text-warning mb-3"></i>
                <h5 class="card-title">äº’å‹•å¼åœ–è¡¨</h5>
                <p class="card-text text-secondary">
                    K ç·šåœ–ã€æˆäº¤é‡ã€MACD åœ–è¡¨å‹•æ…‹å‘ˆç¾ï¼Œ
                    è²·é»æ¸…æ™°æ¨™è¨»ã€‚
                </p>
            </div>
        </div>
    </div>
</div>

<!-- è²·é»ç­–ç•¥è©³ç´°èªªæ˜ -->
<div class="card mb-5">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0"><i class="bi bi-info-circle"></i> è²·é»ç­–ç•¥èªªæ˜</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h6 class="text-success">ğŸš€ ç­–ç•¥ä¸€ï¼šè¶¨å‹¢ç¢ºç«‹è²·é»</h6>
                <p class="text-secondary mb-2">é©ç”¨æ–¼è¶¨å‹¢å•Ÿå‹•åˆæœŸï¼Œæ•æ‰ä¸»å‡æ®µè¡Œæƒ…</p>
                <ul class="small">
                    <li>MA5 å‘ä¸Šçªç ´ MA20ï¼ˆé»ƒé‡‘äº¤å‰ï¼‰</li>
                    <li>å¤šé ­æ’åˆ—: MA5 > MA20 > MA60</li>
                    <li>æˆäº¤é‡æ”¾å¤§ï¼ˆå¤§æ–¼ 5 æ—¥å‡é‡ï¼‰</li>
                </ul>
            </div>
            <div class="col-md-6">
                <h6 class="text-primary">âœ¨ ç­–ç•¥äºŒï¼šæ‹‰å›æ”¯æ’è²·é»</h6>
                <p class="text-secondary mb-2">é©ç”¨æ–¼ä¸Šå‡è¶¨å‹¢ä¸­çš„å›æª”ï¼Œé¢¨éšªè¼ƒä½</p>
                <ul class="small">
                    <li>MACD ç¶­æŒå¤šé ­ï¼ˆDIF > DEMï¼‰</li>
                    <li>æŸ±ç‹€é«”äºŒæ¬¡ç¿»ç´…ï¼ˆOSC åå½ˆï¼‰</li>
                    <li>æ”¶ç›¤åƒ¹å®ˆç©© MA20 æ”¯æ’</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- è¿‘æœŸè¿½è¹¤è¨˜éŒ„ -->
<div id="recentStocks" class="text-center">
    <!-- å‹•æ…‹è¼‰å…¥ -->
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/index.js') }}"></script>
{% endblock %}
```

## 4. åˆ†æé é¢è¨­è¨ˆ (`templates/analyze.html`)

### 4.1 ç‰ˆé¢é…ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   è‚¡ç¥¨è³‡è¨Šå¡ç‰‡                           â”‚
â”‚  [â† è¿”å›]  å°ç©é›» (2330)                               â”‚
â”‚  æœ€æ–°æ”¶ç›¤: 985.00  |  æ—¥æœŸ: 2024-12-08                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                          â”‚
â”‚                   è²·é»è¨Šè™Ÿæ‘˜è¦                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ ç¸½è¨Šè™Ÿæ•¸  â”‚ â”‚ è¶¨å‹¢è²·é»  â”‚ â”‚ æ‹‰å›è²·é»  â”‚              â”‚
â”‚  â”‚    8     â”‚ â”‚    3     â”‚ â”‚    5     â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                          â”‚
â”‚  ğŸ¯ æœ€æ–°è¨Šè™Ÿ: âœ¨ æ‹‰å›æ”¯æ’è²·é» (2024-12-05)             â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                          â”‚
â”‚                   K ç·šåœ– + å‡ç·š                         â”‚
â”‚  [äº’å‹•å¼ Plotly åœ–è¡¨]                                   â”‚
â”‚  - K ç·š                                                 â”‚
â”‚  - MA5/MA20/MA60                                       â”‚
â”‚  - è²·é»æ¨™è¨˜                                             â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                          â”‚
â”‚                   æˆäº¤é‡åœ–è¡¨                             â”‚
â”‚  [æŸ±ç‹€åœ–]                                               â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                          â”‚
â”‚                   MACD åœ–è¡¨                             â”‚
â”‚  [æŠ˜ç·šåœ– + æŸ±ç‹€åœ–]                                      â”‚
â”‚  - DIF (å¿«ç·š)                                          â”‚
â”‚  - DEM (æ…¢ç·š)                                          â”‚
â”‚  - OSC (æŸ±ç‹€é«”)                                        â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                          â”‚
â”‚                   è¨Šè™Ÿè©³ç´°åˆ—è¡¨                           â”‚
â”‚  æ—¥æœŸ      | è¨Šè™Ÿé¡å‹      | æ”¶ç›¤åƒ¹ | MA20  | MACD     â”‚
â”‚  2024-12-05 | æ‹‰å›æ”¯æ’è²·é» | 980.00 | 975.00 | +1.70  â”‚
â”‚  2024-11-20 | è¶¨å‹¢ç¢ºç«‹è²·é» | 965.00 | 960.00 | +2.30  â”‚
â”‚  ...                                                    â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                          â”‚
â”‚                   æ“ä½œæŒ‰éˆ•                               â”‚
â”‚  [æ›´æ–°æ•¸æ“š] [æ¸…é™¤å¿«å–] [åŒ¯å‡º CSV]                        â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 HTML å¯¦ä½œæ‘˜éŒ„

```html
{% extends 'base.html' %}

{% block title %}{{ ticker }} - æŠ€è¡“åˆ†æ{% endblock %}

{% block content %}
<!-- è¼‰å…¥ä¸­æç¤º -->
<div id="loadingIndicator" class="text-center my-5">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">åˆ†æä¸­...</span>
    </div>
    <p class="mt-3 text-secondary">æ­£åœ¨åˆ†æ {{ ticker }}ï¼Œè«‹ç¨å€™...</p>
</div>

<!-- åˆ†æçµæœå€ï¼ˆåˆå§‹éš±è—ï¼‰ -->
<div id="analysisResult" style="display: none;">

    <!-- è‚¡ç¥¨è³‡è¨Šå¡ç‰‡ -->
    {% include 'components/stock_info.html' %}

    <!-- è²·é»è¨Šè™Ÿæ‘˜è¦ -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card text-center border-primary">
                <div class="card-body">
                    <h6 class="text-secondary">ç¸½è¨Šè™Ÿæ•¸</h6>
                    <h2 class="text-primary mb-0" id="totalSignals">-</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center border-success">
                <div class="card-body">
                    <h6 class="text-secondary">ğŸš€ è¶¨å‹¢è²·é»</h6>
                    <h2 class="text-success mb-0" id="type1Signals">-</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-center border-info">
                <div class="card-body">
                    <h6 class="text-secondary">âœ¨ æ‹‰å›è²·é»</h6>
                    <h2 class="text-info mb-0" id="type2Signals">-</h2>
                </div>
            </div>
        </div>
    </div>

    <!-- æœ€æ–°è¨Šè™Ÿæç¤º -->
    <div id="latestSignalAlert" class="alert alert-success" role="alert">
        <!-- å‹•æ…‹è¼‰å…¥ -->
    </div>

    <!-- K ç·šåœ– -->
    <div class="card mb-4">
        <div class="card-header bg-dark text-white">
            <h5 class="mb-0"><i class="bi bi-graph-up"></i> K ç·šåœ– & ç§»å‹•å¹³å‡ç·š</h5>
        </div>
        <div class="card-body">
            <div id="candlestickChart"></div>
        </div>
    </div>

    <!-- æˆäº¤é‡åœ– -->
    <div class="card mb-4">
        <div class="card-header bg-dark text-white">
            <h5 class="mb-0"><i class="bi bi-bar-chart"></i> æˆäº¤é‡</h5>
        </div>
        <div class="card-body">
            <div id="volumeChart"></div>
        </div>
    </div>

    <!-- MACD åœ– -->
    <div class="card mb-4">
        <div class="card-header bg-dark text-white">
            <h5 class="mb-0"><i class="bi bi-activity"></i> MACD æŒ‡æ¨™</h5>
        </div>
        <div class="card-body">
            <div id="macdChart"></div>
        </div>
    </div>

    <!-- è¨Šè™Ÿè©³ç´°åˆ—è¡¨ -->
    {% include 'components/signal_table.html' %}

    <!-- æ“ä½œæŒ‰éˆ• -->
    <div class="text-center mb-4">
        <button class="btn btn-primary" id="updateBtn">
            <i class="bi bi-arrow-clockwise"></i> æ›´æ–°æ•¸æ“š
        </button>
        <button class="btn btn-warning" id="clearCacheBtn">
            <i class="bi bi-trash"></i> æ¸…é™¤å¿«å–
        </button>
        <button class="btn btn-success" id="exportBtn">
            <i class="bi bi-download"></i> åŒ¯å‡º CSV
        </button>
    </div>

</div>

<!-- éŒ¯èª¤è¨Šæ¯å€ -->
<div id="errorMessage" class="alert alert-danger" role="alert" style="display: none;">
    <!-- å‹•æ…‹è¼‰å…¥ -->
</div>

{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/analyze.js') }}"></script>
<script>
    // é é¢è¼‰å…¥æ™‚ç«‹å³é–‹å§‹åˆ†æ
    document.addEventListener('DOMContentLoaded', function() {
        analyzeStock('{{ ticker }}');
    });
</script>
{% endblock %}
```

## 5. æ­·å²è¨˜éŒ„é é¢ (`templates/history.html`)

### 5.1 ç‰ˆé¢é…ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   é é¢æ¨™é¡Œ                               â”‚
â”‚  æ­·å²è¿½è¹¤è¨˜éŒ„                                            â”‚
â”‚  å·²è¿½è¹¤ 5 æ”¯è‚¡ç¥¨                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                          â”‚
â”‚  [æœå°‹] [æ’åº: æœ€æ–°æ›´æ–° â–¼]                              â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 2330 - å°ç©é›»                                â”‚      â”‚
â”‚  â”‚ æ”¶ç›¤åƒ¹: 985.00  |  æ›´æ–°: 2024-12-09 09:00    â”‚      â”‚
â”‚  â”‚ æ•¸æ“šç¯„åœ: 2024-01-01 ~ 2024-12-08 (240å¤©)   â”‚      â”‚
â”‚  â”‚ [æŸ¥çœ‹åˆ†æ] [æ›´æ–°] [åˆªé™¤]                     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 3363 - ä¸Šè©®                                  â”‚      â”‚
â”‚  â”‚ æ”¶ç›¤åƒ¹: 52.30  |  æ›´æ–°: 2024-12-08 15:30     â”‚      â”‚
â”‚  â”‚ æ•¸æ“šç¯„åœ: 2024-01-01 ~ 2024-12-08 (238å¤©)   â”‚      â”‚
â”‚  â”‚ [æŸ¥çœ‹åˆ†æ] [æ›´æ–°] [åˆªé™¤]                     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                          â”‚
â”‚  ...                                                    â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 HTML å¯¦ä½œæ‘˜éŒ„

```html
{% extends 'base.html' %}

{% block title %}æ­·å²è¨˜éŒ„ - è‚¡ç¥¨è²·é»è¿½è¹¤ç³»çµ±{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2><i class="bi bi-clock-history"></i> æ­·å²è¿½è¹¤è¨˜éŒ„</h2>
        <p class="text-secondary mb-0">å·²è¿½è¹¤ <span id="totalCount">-</span> æ”¯è‚¡ç¥¨</p>
    </div>
    <div>
        <select class="form-select" id="sortSelect">
            <option value="last_update">æœ€æ–°æ›´æ–°</option>
            <option value="ticker">è‚¡ç¥¨ä»£è™Ÿ</option>
        </select>
    </div>
</div>

<!-- æœå°‹æ¡† -->
<div class="mb-4">
    <input
        type="text"
        class="form-control"
        id="searchInput"
        placeholder="æœå°‹è‚¡ç¥¨ä»£è™Ÿæˆ–åç¨±..."
    >
</div>

<!-- è‚¡ç¥¨åˆ—è¡¨ -->
<div id="stockList">
    <!-- å‹•æ…‹è¼‰å…¥ -->
</div>

<!-- ç©ºç‹€æ…‹ -->
<div id="emptyState" class="text-center my-5" style="display: none;">
    <i class="bi bi-inbox display-1 text-secondary"></i>
    <p class="text-secondary mt-3">å°šç„¡è¿½è¹¤è¨˜éŒ„</p>
    <a href="/" class="btn btn-primary">é–‹å§‹åˆ†æ</a>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/history.js') }}"></script>
{% endblock %}
```

## 6. çµ„ä»¶è¨­è¨ˆ

### 6.1 å°èˆªæ¬„ (`components/navbar.html`)

```html
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
    <div class="container">
        <a class="navbar-brand" href="/">
            <i class="bi bi-graph-up-arrow"></i>
            è‚¡ç¥¨è²·é»è¿½è¹¤
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">
                        <i class="bi bi-house"></i> é¦–é 
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/history">
                        <i class="bi bi-clock-history"></i> æ­·å²è¨˜éŒ„
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#aboutModal">
                        <i class="bi bi-info-circle"></i> èªªæ˜
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
```

### 6.2 è‚¡ç¥¨è³‡è¨Šå¡ç‰‡ (`components/stock_info.html`)

```html
<div class="card mb-4 border-primary">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h3 class="mb-1">
                    <span id="stockName">-</span>
                    <span class="text-secondary">(<span id="stockTicker">-</span>)</span>
                </h3>
                <p class="text-secondary mb-0">
                    æœ€æ–°æ”¶ç›¤: <span class="fs-4 fw-bold text-primary" id="latestClose">-</span>
                    <span class="ms-3">æ—¥æœŸ: <span id="latestDate">-</span></span>
                </p>
            </div>
            <div>
                <a href="/" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left"></i> è¿”å›
                </a>
            </div>
        </div>
    </div>
</div>
```

### 6.3 è¨Šè™Ÿè¡¨æ ¼ (`components/signal_table.html`)

```html
<div class="card mb-4">
    <div class="card-header bg-dark text-white">
        <h5 class="mb-0"><i class="bi bi-list-ul"></i> è²·é»è¨Šè™Ÿè©³ç´°åˆ—è¡¨</h5>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover" id="signalTable">
                <thead>
                    <tr>
                        <th>æ—¥æœŸ</th>
                        <th>è¨Šè™Ÿé¡å‹</th>
                        <th>æ”¶ç›¤åƒ¹</th>
                        <th>MA20</th>
                        <th>æˆäº¤é‡</th>
                        <th>DIF</th>
                        <th>DEM</th>
                        <th>OSC</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- å‹•æ…‹è¼‰å…¥ -->
                </tbody>
            </table>
        </div>
    </div>
</div>
```

## 7. JavaScript æ¶æ§‹

### 7.1 ä¸»è¦ JS æ–‡ä»¶ (`static/js/main.js`)

```javascript
// API åŸºç¤ URL
const API_BASE_URL = '';

// é€šç”¨éŒ¯èª¤è™•ç†
function handleError(error) {
    console.error('Error:', error);

    let message = 'ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦';

    if (error.response && error.response.data) {
        message = error.response.data.error.message || message;
    }

    showToast(message, 'danger');
}

// Toast é€šçŸ¥
function showToast(message, type = 'success') {
    // å¯¦ä½œ Toast æç¤º
    const toast = `
        <div class="toast align-items-center text-white bg-${type} border-0" role="alert">
            <div class="d-flex">
                <div class="toast-body">${message}</div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
            </div>
        </div>
    `;
    // é¡¯ç¤ºé‚è¼¯...
}

// æ ¼å¼åŒ–æ•¸å­—
function formatNumber(num, decimals = 2) {
    return parseFloat(num).toLocaleString('zh-TW', {
        minimumFractionDigits: decimals,
        maximumFractionDigits: decimals
    });
}

// æ ¼å¼åŒ–æ—¥æœŸ
function formatDate(dateString) {
    return new Date(dateString).toLocaleDateString('zh-TW');
}
```

### 7.2 åˆ†æé é¢ JS (`static/js/analyze.js`)

```javascript
// åˆ†æè‚¡ç¥¨
async function analyzeStock(ticker) {
    try {
        // é¡¯ç¤ºè¼‰å…¥æŒ‡ç¤ºå™¨
        document.getElementById('loadingIndicator').style.display = 'block';
        document.getElementById('analysisResult').style.display = 'none';

        // ç™¼é€ API è«‹æ±‚
        const response = await axios.post('/api/analyze', {
            ticker: ticker,
            start_date: '2024-01-01',
            days: 120
        });

        if (response.data.success) {
            renderAnalysisResult(response.data.data);
        }

    } catch (error) {
        handleError(error);
        showErrorMessage(error.response.data.error.message);
    } finally {
        document.getElementById('loadingIndicator').style.display = 'none';
    }
}

// æ¸²æŸ“åˆ†æçµæœ
function renderAnalysisResult(data) {
    // æ›´æ–°è‚¡ç¥¨è³‡è¨Š
    document.getElementById('stockName').textContent = data.stock_name;
    document.getElementById('stockTicker').textContent = data.ticker;
    document.getElementById('latestClose').textContent = formatNumber(data.latest_data.close);
    document.getElementById('latestDate').textContent = data.latest_data.date;

    // æ›´æ–°è¨Šè™Ÿæ‘˜è¦
    document.getElementById('totalSignals').textContent = data.signals.total_count;
    document.getElementById('type1Signals').textContent = data.signals.type1_count;
    document.getElementById('type2Signals').textContent = data.signals.type2_count;

    // æ¸²æŸ“åœ–è¡¨
    renderCandlestickChart(data.chart.candlestick);
    renderVolumeChart(data.chart.volume);
    renderMacdChart(data.chart.macd);

    // æ¸²æŸ“è¨Šè™Ÿè¡¨æ ¼
    renderSignalTable(data.signals.recent_signals);

    // é¡¯ç¤ºçµæœå€
    document.getElementById('analysisResult').style.display = 'block';
}

// æ¸²æŸ“ K ç·šåœ–
function renderCandlestickChart(chartData) {
    Plotly.newPlot('candlestickChart', chartData.data, chartData.layout, {responsive: true});
}
```

## 8. éŸ¿æ‡‰å¼è¨­è¨ˆ

### 8.1 æ–·é»å®šç¾©

```css
/* Bootstrap 5 æ–·é» */
/* xs: < 576px (æ‰‹æ©Ÿ) */
/* sm: >= 576px (å¤§æ‰‹æ©Ÿ) */
/* md: >= 768px (å¹³æ¿) */
/* lg: >= 992px (æ¡Œé¢) */
/* xl: >= 1200px (å¤§æ¡Œé¢) */
/* xxl: >= 1400px (è¶…å¤§æ¡Œé¢) */
```

### 8.2 éŸ¿æ‡‰å¼èª¿æ•´

```css
/* æ‰‹æ©Ÿå„ªå…ˆ */
.card {
    margin-bottom: 1rem;
}

/* å¹³æ¿ä»¥ä¸Š */
@media (min-width: 768px) {
    .card {
        margin-bottom: 1.5rem;
    }

    #candlestickChart {
        height: 500px;
    }
}

/* æ¡Œé¢ */
@media (min-width: 992px) {
    #candlestickChart {
        height: 600px;
    }
}
```

## 9. ç„¡éšœç¤™è¨­è¨ˆ (Accessibility)

### 9.1 èªç¾©åŒ– HTML
```html
<!-- ä½¿ç”¨æ­£ç¢ºçš„æ¨™ç±¤ -->
<nav>...</nav>
<main>...</main>
<article>...</article>
<aside>...</aside>
```

### 9.2 ARIA å±¬æ€§
```html
<button aria-label="åˆ†æè‚¡ç¥¨">åˆ†æ</button>
<div role="alert">éŒ¯èª¤è¨Šæ¯</div>
```

### 9.3 éµç›¤å°èˆª
```javascript
// æ”¯æ´ Enter éµæäº¤
input.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        submitForm();
    }
});
```

---

**æ–‡ä»¶ç‰ˆæœ¬**: 1.0
**æœ€å¾Œæ›´æ–°**: 2025-12-09
**è¨­è¨ˆè¦ç¯„**: Bootstrap 5 + Plotly
